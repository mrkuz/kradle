# Kradle

## Changelog

### Version ${kradleVersion} (${new Date().format("yyyy-MM-dd")})

- Support for [Java development](README.md#java-development) (linting, code analysis, bootstrapping, preview features)
- Fix `dev` in combination with Gradle toolchains
- ktlint rules are configurable
- Add [`withCustomTests`](README.md#test-improvements)
- Add alternative configuration syntax for ktlint and detekt

  Before

    ```kotlin
    kradle {
        jvm {
            kotlin {
                lint {
                    ktlintVersion("0.43.2")
                }
                codeAnalysis {
                    detektConfigFile("detekt-config.yml")
                    detektVersion("1.19.0")
                }
            }
        }
    }
    ```

  After

    ```kotlin
    kradle {
        jvm {
            kotlin {
                lint {
                    ktlint {
                        version("0.43.2")
                    }
                }
                codeAnalysis {
                    detekt {
                        version("1.19.0")
                        configFile("detekt-config.yml")
                    }
                }
            }
        }
    }
    ```

### Version 2.0.1 (2022-01-01)

- `kradle` now works in combination with [Gradle toolchains](https://docs.gradle.org/current/userguide/toolchains.html)
- Fix `analyzeDependencies`

### Version 2.0.0 (2021-12-29)

- Fix `bootstrap` for multi-project builds
- Fix exclusion of alpha versions and RCs in `showDependencyUpdates`
- Set default target JVM to 17
- Update plugins and dependencies
- New plugin `net.bitsandbobs.kradle`, which combines the functionality of `kradle-app` and `kradle-lib`
- New configuration DSL (see [Appendix A](README.md#appendix-a-configuration-reference))
- Deprecate `kradle-app` and `kradle-lib`. They still work, but because of internal changes it is no longer possible to use [`disable`](https://github.com/mrkuz/kradle/tree/v1.2.0#blueprints). They won't receive any new features. Consider using `net.bitsandbobs.kradle` instead.

### Version 1.2.0 (2021-09-23)

- The tasks `showDependencyUpdates`, `analyzeCode`, `analyzeDependencies`, `generateDocumentation`,
  `uberJar` and `buildImage` are no longer aliases. Instead, they are independent tasks.
- Support use of `@JvmName`
- Automatically add `kotlin-reflect` to project dependencies
- __Breaking change__: `run` no longer sets `DEV_MODE=true`
- JMH and detekt versions are now configurable
- Strict JSR-305 processing
- Fix package statement of main class generated by `bootstrap`
- __Breaking change__: The JAR created by `uberJar` is no longer minimized by default
- __Breaking change__: Content of _build.properties_ generated by `generateBuildProperties` changed

  Before

  ```properties
  version=...
  timestamp=...
  git.commit-id=...
  ```

  After

  ```properties
  project.name=...
  project.group=...
  project.version=...
  build.timestamp=...
  git.commit-id=...
  ```

### Version 1.1.0 (2021-09-09)

- New task `bootstrap`: Bootstraps new app/lib project
- New task `dev`: Runs the application and stops it when sources change (for automatic rebuilds and restarts)
- New task `generateGitignore`: Generates _.gitignore_
- Added source sets and tasks for integration and functional tests
- module.md and package.md for Dokka can also be placed in any source directory
- Syntactic sugar: Added methods for configuration

  Before

    ```kotlin
    kradle {
        targetJvm.set("16")
    }
    ```

  After

    ```kotlin
    kradle {
        targetJvm("16")
    }
    ```

- Added configuration for main class

  Before

    ```kotlin
    application {
        mainClass.set("com.example.demo.AppKt")
    }
    ```

  After

    ```kotlin
    kradle {
        mainClass("com.example.demo.App")
    }
    ```


- Moved JaCoCo version to `tests`

  Before

    ```kotlin
    kradle {
        jacocoVersion("0.8.7")
    }
    ```

  After

    ```kotlin
    kradle {
        tests {
            jacocoVersion("0.8.7")
        }
    }
    ```
